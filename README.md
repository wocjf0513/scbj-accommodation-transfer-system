![transparent](https://capsule-render.vercel.app/api?type=waving&fontColor=FFFFFF&text=%%호텔&height=230&fontAlignY=40&fontSize=60&desc=Team.숙취방지&descAlignY=65&descAlign=74&color=FE5E0D&)<br>
<img src="https://avatars.githubusercontent.com/u/154401745?s=200&v=4SCBJ-BE" width=100 alt=숙취방지> [퍼센트 호텔](https://percenthotel.web.app/)
>**무료 예약 취소 불가한 숙소의 양도/거래 플랫폼 "퍼센트 호텔"**

> 일시: 2023.12.06~2024.01.28 ~<br>
> 구성원: PM 5명 / UX/UI 1명 / Frontend 5명 / Backend 4명
## 👨‍👩‍👦‍👦 참여인원
|                                            Backend                                             |                                        Backend                                         |                                         Backend                                         |                                           Backend                                            |
|:----------------------------------------------------------------------------------------------:|:--------------------------------------------------------------------------------------:|:---------------------------------------------------------------------------------------:|:--------------------------------------------------------------------------------------------:|
|    <img src="https://avatars.githubusercontent.com/u/63856521?v=4" width=140px alt="양유림"/>     | <img src="https://avatars.githubusercontent.com/u/59725406?v=4" width=140px alt="심재철"> | <img src="https://avatars.githubusercontent.com/u/111270670?v=4" width=140px alt="김정훈"> |   <img src="https://avatars.githubusercontent.com/u/34360434?v=4" width=140px alt="권민우"/>    |
|                              [양유림](https://github.com/YurimYang)                               |                          [심재철](https://github.com/wocjf0513)                           |                          [김정훈](https://github.com/Aleexender)                           |                             [권민우](https://github.com/Kwonminwoo)                             |
 |                             상품 생성<br/>예약/구매 내역 조회<br/>결제<br/>크롤링                               |                              인프라<br/>CI&CD<br/>알림<br/>회원                               |                      상품 검색<br/>판매/구매 내역 조회<br/>메인 페이지<br/>거래 상세 조회                      |                         상품 상세 조회<br/>상품 삭제<br/> 결제<br/>결제 페이지 조회<br/>크롤링                          |
## :hotel: 개요
`취소·환불이 불가한 숙박 결제건에 대해 양도를 할 수 있는 웹·앱`
## :pencil2: 개발 배경
- 예약 취소에 대한 불만이 많음, 유저의 착각/실수도 있으나 천재지변, 개인적 사유로 인해 어쩔 수 없이 취소수수료가 발생하는 경우 유저의 불만 및 탈퇴로 이어짐 
- 예약 취소의 부정적 경험으로 인해 유저가 탈퇴하는 것을 막을 수 있는 방안으로 예약 취소 불가 상품을 해결할 수 있는 플랫폼 또는 기능 제공
- 공급자와 기존 구매자, 양도자를 모두 고려한 안전하고 신뢰도 높은 예약 취소 거래 기능 구축
- 예약 취소 수수료가 아닌 취소 예약건을 온전히 체크인 완료하면 매출 증대에 기여할 것으로 기대함


## :movie_camera: 시연 영상
[숙취방지 앱 시연 영상](https://github.com/wocjf0513/scbj-accommodation-transfer-system/assets/59725406/6bc59b58-a862-4729-b716-73cb367692ae)

## 💭 프로젝트 후기
[패스트캠퍼스X야놀자: 백엔드 개발 부트캠프 파이널 프로젝트](https://blog.naver.com/wocjf0513/223341119477)

## :alarm_clock: 프로젝트 기간
`2023-11-20 ~ 2023-12-01`

## 🔗 배포 링크

- BE: [https://3.34.147.187.nip.io/](https://3.34.147.187.nip.io/)
- FE: [https://shimpyo.netlify.app/](https://percenthotel.web.app/)

## 🥺 RestDocs
- SCBJ Application을 실행시키시면, index.html을 통해 확인하실 수 있습니다 😄
- Index.html : https://3.34.147.187.nip.io/docs/index.html 

## 🛠️ 기술 스택

Backend<br>
<img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=for-the-badge&logo=SpringBoot&logoColor=white">
<img src="https://img.shields.io/badge/Spring Security-00E47C?style=for-the-badge&logo=SpringSecurity&logoColor=white">
<img src="https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white">

Database<br>
<img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=Redis&logoColor=black">
<img src="https://img.shields.io/badge/MySQL-316192?style=for-the-badge&logo=mysql&logoColor=white">

Infra & ThirdParty</br>
<img src="https://img.shields.io/badge/AWS-FF9900?style=for-the-badge&logo=amazonaws&logoColor=white">
<img src="https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white">
<img src="https://img.shields.io/badge/Firebase-FFAA00?style=for-the-badge&logo=Firebase&logoColor=white">
<img src="https://img.shields.io/badge/Kakao Pay-FFCD00?style=for-the-badge&logo=KakaoTalk&logoColor=white">


## ERD
![(정리용) 숙취방지 최종 ERD - v1 (1)](https://github.com/SCBJ-7/SCBJ-BE/assets/63856521/8a6a60f0-333e-4569-b217-0b9c514d7389)


## ARCHITECTURE
![숙취방지 최종 ARCHITECTURE](https://github.com/SCBJ-7/SCBJ-BE/assets/63856521/74661494-beb8-4ae7-a7d5-d864b4ac64dc)

## :100: 숙취 방지의 자랑
![image](https://github.com/wocjf0513/scbj-accommodation-transfer-system/assets/59725406/89899760-ae93-4b62-aa88-1273a7068e6c)
> 숙취 방지는 사용저 경험을 고려해서 위와 같은 서비스를 제공합니다!

### :alarm_clock: FCM 선택 이유
![image](https://github.com/wocjf0513/scbj-accommodation-transfer-system/assets/59725406/476dbc2d-bda0-4ff0-bc69-310418a949cf)
> 숙취 방지 푸쉬 알림 특징
1. 어느 정도의 지연 시간이 허용됨.
2. 서버 -> 클라이언트 (단방향 통신)

![image](https://github.com/wocjf0513/scbj-accommodation-transfer-system/assets/59725406/0545181d-cd29-48de-96e5-b1012d5e5ac6)
> 단방향 통신의 대표적인 방법인 FCM과 SSE를 비교
- SSE보다는 FCM이 호환성이 좋기에 확장성에서 뛰어남.
- 네트워크 연결된 상태를 유지하지 않아 서버 리소스를 효율적이게 사용.


## :mountain: 추후 고도화 사항
- 심재철
  - 멤버 도메인 (Spring Security + JWT)
  
  ![img.png](src%2Fmain%2Fresources%2Fstatic%2Fimg%2Fimg.png)
  ```markdown
  이번 프로젝트에서 사용되는
  Filter가 여러 가지가 될 수 있음에도 (추후 개발을 하면서)
  
  위와 같은 구조를 두지 않고
  JWT Filter를 하나만 등록해 사용했다.
  
  그러다보니 Filter가 생길 수록 관리하기 힘들어졌고
  확장성면에서 좋지 않은 구조로 짰다.
  
  프로젝트를 끝내고, 24. 02. 10일부터 다시하기로 했으니
  위와 같은 구조로서 확장성을 확보하고자 한다.
  ```
  - 알람 도메인
  ```markdown
  PM측의 부탁으로
  알림에 대한 추가 구현 사항이 생겼다.
  
  결제된 상품에 대한 체크인 임박 푸쉬 알림을 보내는 것이었다.
  이를 위해 매 분 스케줄링을 하며, 체크인 임박이 된 상품을 조회했다.
  그러다보니, 서버 리소스를 많이 잡게 됐고,
  
  알림 도메인만 따로 구성한 서버를 둬, MSA구조를 두고자 한다.
  또한, SpringBatch를 통해 효율적으로 일괄 처리가 되게끔 한다. 
  ```
### :thinking: [숙취방지가 있기위한 Discussions](https://github.com/SCBJ-7/SCBJ-BE/discussions)

## ⌨️ 설정
- 자바 버전: 17

- 스프링 버전: 6.0

- 스프링 부트 버전: 3.2.1

## ✨ 의존성

- Spring Boot Starter

  - `org.springframework.boot:spring-boot-starter-data-jpa`
  - `org.springframework.boot:spring-boot-starter-validation`
  - `org.springframework.boot:spring-boot-starter-web`
  - `org.springframework.boot:spring-boot-starter-test`
  - `org.springframework.boot:spring-boot-starter-mail`

- DB
  - `com.mysql:mysql-connector-j`
  - `com.h2database:h2`

- QueryDSL
  - `com.querydsl:querydsl-jpa:5.0.0:jakarta`
  - `com.querydsl:querydsl-apt:5.0.0:jakarta`
  - `jakarta.annotation:jakarta.annotation-api`
  - `jakarta.persistence:jakarta.persistence-api`

- JWT
  - `io.jsonwebtoken', name: 'jjwt-api', version: '0.11.5`
  - `io.jsonwebtoken', name: 'jjwt-impl', version: '0.11.5`
  - `io.jsonwebtoken', name: 'jjwt-jackson', version: '0.11.5`

- Crawling
  - `org.seleniumhq.selenium:selenium-java`
  - `org.seleniumhq.selenium:selenium-api`
  - `org.seleniumhq.selenium:selenium-chrome-driver`

- FCM
  - `com.google.firebase:firebase-admin:9.2.0`

- Thymeleaf
  - `org.springframework.boot:spring-boot-starter-thymeleaf`

- Redisson
  - `org.redisson:redisson-spring-boot-starter:3.21.1`

- Deserialize
  - `com.fasterxml.jackson.datatype:jackson-datatype-jsr310`
  - `com.fasterxml.jackson.core:jackson-databind`

- Scheduling
  - `org.quartz-scheduler:quartz:2.3.0`
